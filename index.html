<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StackEdit.js ÌÜµÌï© ÏóêÎîîÌÑ∞</title>
    
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .header {
            text-align: center;
            padding: 30px 20px;
            color: white;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        
        .header p {
            margin: 10px 0 0 0;
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px 40px;
        }
        
        .controls {
            text-align: center;
            margin-bottom: 30px;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .btn.active {
            background: rgba(255,255,255,0.9);
            color: #667eea;
        }
        
        .editor-container {
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
            backdrop-filter: blur(20px);
        }
        
        .editor-header {
            background: linear-gradient(90deg, #667eea, #764ba2);
            color: white;
            padding: 15px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .editor-title {
            font-weight: 600;
            font-size: 16px;
        }
        
        .editor-status {
            font-size: 14px;
            opacity: 0.9;
        }
        
        .split-view {
            display: flex;
            height: 70vh;
            min-height: 600px;
        }
        
        .textarea-panel, .stackedit-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
        }
        
        .textarea-panel {
            border-right: 1px solid #e5e7eb;
            background: #fafbfc;
        }
        
        .panel-header {
            padding: 15px 20px;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .textarea-header {
            background: #f8f9fa;
            color: #4a5568;
        }
        
        .stackedit-header {
            background: #ffffff;
            color: #4a5568;
        }
        
        .editor-textarea {
            flex: 1;
            border: none;
            padding: 20px;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
            font-size: 14px;
            line-height: 1.7;
            resize: none;
            outline: none;
            background: #fafbfc;
            color: #2d3748;
        }
        
        .stackedit-content {
            flex: 1;
            background: white;
            position: relative;
            overflow: hidden;
        }
        
        .stackedit-iframe {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            z-index: 10;
        }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f4f6;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .features-section {
            margin-top: 30px;
            padding: 25px;
            background: rgba(255,255,255,0.95);
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            backdrop-filter: blur(20px);
        }
        
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .feature-card {
            padding: 20px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0e7ff 100%);
            border-radius: 12px;
            border-left: 4px solid #667eea;
        }
        
        .feature-card h4 {
            color: #4338ca;
            margin: 0 0 10px 0;
            font-size: 1.1rem;
        }
        
        .feature-card p {
            color: #64748b;
            margin: 0;
            font-size: 0.95rem;
        }
        
        .demo-section {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border: 1px solid #e5e7eb;
        }
        
        .demo-files {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .demo-file {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .demo-file:hover {
            background: #5a67d8;
            transform: translateY(-1px);
        }
        
        .status-info {
            margin-top: 15px;
            padding: 15px;
            background: #e8f4fd;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .status-info h5 {
            margin: 0 0 8px 0;
            color: #4338ca;
        }
        
        .status-info p {
            margin: 0;
            color: #64748b;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .split-view {
                flex-direction: column;
                height: auto;
            }
            
            .textarea-panel, .stackedit-panel {
                min-height: 400px;
            }
            
            .textarea-panel {
                border-right: none;
                border-bottom: 1px solid #e5e7eb;
            }
            
            .controls {
                gap: 8px;
            }
            
            .btn {
                padding: 10px 18px;
                font-size: 13px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üöÄ StackEdit.js ÌÜµÌï© ÏóêÎîîÌÑ∞</h1>
        <p>ÏßÑÏßú StackEditÏùò Î™®Îì† Í∏∞Îä•ÏùÑ ÏõπÏÇ¨Ïù¥Ìä∏Ïóê ÌÜµÌï©</p>
    </div>
    
    <div class="container">
        <div class="controls">
            <button class="btn active" id="openStackEditBtn">üìù StackEdit Ïó¥Í∏∞</button>
            <button class="btn" id="silentModeBtn">üîá Silent Î™®Îìú</button>
            <button class="btn" id="closeStackEditBtn">‚ùå StackEdit Îã´Í∏∞</button>
            <button class="btn" id="exportHtmlBtn">üíæ HTML ÎÇ¥Î≥¥ÎÇ¥Í∏∞</button>
        </div>
        
        <div class="editor-container">
            <div class="editor-header">
                <div class="editor-title">üìÑ StackEdit.js ÌÜµÌï© ÏóêÎîîÌÑ∞</div>
                <div class="editor-status" id="editorStatus">Ï§ÄÎπÑÎê®</div>
            </div>
            
            <div class="split-view">
                <div class="textarea-panel">
                    <div class="panel-header textarea-header">
                        <span>üìù ÎßàÌÅ¨Îã§Ïö¥ ÏÜåÏä§</span>
                        <span id="fileInfo">document.md</span>
                    </div>
                    <textarea id="markdownTextarea" class="editor-textarea" placeholder="Ïó¨Í∏∞Ïóê ÎßàÌÅ¨Îã§Ïö¥ÏùÑ ÏûëÏÑ±ÌïòÍ±∞ÎÇò StackEditÏóêÏÑú Ìé∏ÏßëÌïòÏÑ∏Ïöî...

# StackEdit.js Îç∞Î™®

Ïù¥ ÏóêÎîîÌÑ∞Îäî **Ïã§Ï†ú StackEdit**ÏùÑ iframeÏúºÎ°ú ÏûÑÎ≤†ÎìúÌïòÏó¨ Î™®Îì† Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.

## üåü Ï£ºÏöî Í∏∞Îä•

### ÏàòÌïô Í≥µÏãù (KaTeX)
$$E = mc^2$$

### Îã§Ïù¥Ïñ¥Í∑∏Îû® (Mermaid)
```mermaid
graph TD
    A[Start] --> B{Decision}
    B -->|Yes| C[Success]
    B -->|No| D[Retry]
```

### Ìëú
| Í∏∞Îä• | ÏßÄÏõê Ïó¨Î∂Ä |
|------|-----------|
| KaTeX | ‚úÖ |
| Mermaid | ‚úÖ |
| Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî | ‚úÖ |

**StackEdit Ïó¥Í∏∞** Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠Ìï¥ÏÑú ÏßÑÏßú StackEditÏúºÎ°ú Ìé∏ÏßëÌï¥Î≥¥ÏÑ∏Ïöî!"></textarea>
                </div>
                
                <div class="stackedit-panel">
                    <div class="panel-header stackedit-header">
                        <span>üëÅÔ∏è StackEdit ÎØ∏Î¶¨Î≥¥Í∏∞</span>
                        <span id="stackeditStatus">ÎåÄÍ∏∞ Ï§ë</span>
                    </div>
                    <div class="stackedit-content">
                        <div class="loading-overlay" id="loadingOverlay" style="display: none;">
                            <div class="loading-spinner"></div>
                            <p style="margin-top: 15px; color: #64748b;">StackEdit Î°úÎî© Ï§ë...</p>
                        </div>
                        <div id="previewContent" style="padding: 20px; height: 100%; overflow-y: auto; background: white;">
                            <div style="text-align: center; padding: 40px; color: #64748b;">
                                <h3 style="color: #667eea; margin-bottom: 15px;">üöÄ StackEdit.js ÌÜµÌï© ÏóêÎîîÌÑ∞</h3>
                                <p style="margin-bottom: 20px;">ÏôºÏ™Ω ÌÖçÏä§Ìä∏ ÏòÅÏó≠Ïóê ÎßàÌÅ¨Îã§Ïö¥ÏùÑ ÏûëÏÑ±ÌïòÍ±∞ÎÇò<br><strong>"StackEdit Ïó¥Í∏∞"</strong> Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠Ìï¥ÏÑú ÏãúÏûëÌïòÏÑ∏Ïöî!</p>
                                <div style="background: #f8f9ff; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea; text-align: left;">
                                    <strong>üí° ÌåÅ:</strong> StackEditÏùÑ Ïó¥Î©¥ Ïã§Ï†ú StackEditÏùò Î™®Îì† Í∏∞Îä•ÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§:
                                    <ul style="margin: 10px 0 0 20px;">
                                        <li>ÏôÑÏ†ÑÌïú KaTeX ÏàòÌïô ÏßÄÏõê</li>
                                        <li>Mermaid Îã§Ïù¥Ïñ¥Í∑∏Îû®</li>
                                        <li>Í≥†Í∏â ÎßàÌÅ¨Îã§Ïö¥ ÌôïÏû•</li>
                                        <li>Ïã§ÏãúÍ∞Ñ ÌòëÏóÖ</li>
                                        <li>ÌÅ¥ÎùºÏö∞Îìú ÎèôÍ∏∞Ìôî</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="features-section">
            <h3 style="color: #4338ca; margin: 0 0 15px 0;">‚ú® StackEdit.jsÏùò Í∞ïÎ†•Ìïú Í∏∞Îä•Îì§</h3>
            
            <div class="features-grid">
                <div class="feature-card">
                    <h4>üîó ÏôÑÏ†ÑÌïú ÌÜµÌï©</h4>
                    <p>ÏßÑÏßú StackEditÏùÑ iframeÏúºÎ°ú ÏûÑÎ≤†ÎìúÌïòÏó¨ Î™®Îì† ÏõêÎ≥∏ Í∏∞Îä•ÏùÑ Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©Ìï† Ïàò ÏûàÏäµÎãàÎã§.</p>
                </div>
                <div class="feature-card">
                    <h4>üì± Í≤ΩÎüâ ÎùºÏù¥Î∏åÎü¨Î¶¨</h4>
                    <p>ÏùòÏ°¥ÏÑ±Ïù¥ ÏóÜÎäî Í≤ΩÎüâ ÎùºÏù¥Î∏åÎü¨Î¶¨Î°ú Ïñ¥Îñ§ ÏõπÏÇ¨Ïù¥Ìä∏ÏóêÎì† ÏâΩÍ≤å ÌÜµÌï© Í∞ÄÎä•Ìï©ÎãàÎã§.</p>
                </div>
                <div class="feature-card">
                    <h4>üîÑ Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî</h4>
                    <p>StackEditÏóêÏÑúÏùò Î≥ÄÍ≤ΩÏÇ¨Ìï≠Ïù¥ Ï¶âÏãú textareaÏóê Î∞òÏòÅÎêòÏñ¥ ÏôÑÎ≤ΩÌïú ÎèôÍ∏∞ÌôîÎ•º Ï†úÍ≥µÌï©ÎãàÎã§.</p>
                </div>
                <div class="feature-card">
                    <h4>üéõÔ∏è Silent Î™®Îìú</h4>
                    <p>UI ÏóÜÏù¥ Î∞±Í∑∏ÎùºÏö¥ÎìúÏóêÏÑú ÎßàÌÅ¨Îã§Ïö¥ÏùÑ HTMLÎ°ú Î≥ÄÌôòÌïòÎäî Í∏∞Îä•ÏùÑ Ï†úÍ≥µÌï©ÎãàÎã§.</p>
                </div>
                <div class="feature-card">
                    <h4>üßÆ ÏôÑÏ†ÑÌïú KaTeX</h4>
                    <p>StackEditÏùò ÏôÑÏ†ÑÌïú ÏàòÌïô Í≥µÏãù ÏßÄÏõêÏúºÎ°ú Î≥µÏû°Ìïú LaTeX ÏàòÏãùÎèÑ ÏôÑÎ≤Ω Î†åÎçîÎßÅÎê©ÎãàÎã§.</p>
                </div>
                <div class="feature-card">
                    <h4>üìä Mermaid Îã§Ïù¥Ïñ¥Í∑∏Îû®</h4>
                    <p>ÌîåÎ°úÏö∞Ï∞®Ìä∏, ÏãúÌÄÄÏä§ Îã§Ïù¥Ïñ¥Í∑∏Îû®, Í∞ÑÌä∏ Ï∞®Ìä∏ Îì± Î™®Îì† Îã§Ïù¥Ïñ¥Í∑∏Îû®ÏùÑ ÏßÄÏõêÌï©ÎãàÎã§.</p>
                </div>
            </div>
            
            <div class="demo-section">
                <h4 style="color: #4338ca; margin: 0 0 15px 0;">üéØ Îç∞Î™® ÌååÏùº Î∂àÎü¨Ïò§Í∏∞</h4>
                <div class="demo-files">
                    <div class="demo-file" data-demo="math">üßÆ ÏàòÌïô Í≥µÏãù ÏòàÏ†ú</div>
                    <div class="demo-file" data-demo="diagram">üìä Îã§Ïù¥Ïñ¥Í∑∏Îû® ÏòàÏ†ú</div>
                    <div class="demo-file" data-demo="table">üìã Í≥†Í∏â Ìëú ÏòàÏ†ú</div>
                    <div class="demo-file" data-demo="stackedit">üìù StackEdit Î¨∏ÏÑú</div>
                </div>
                
                <div class="status-info">
                    <h5>üîß ÏÇ¨Ïö© Î∞©Î≤ï</h5>
                    <p>1. Îç∞Î™® ÌååÏùºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ ÏÉòÌîå ÎÇ¥Ïö©ÏùÑ Î°úÎìúÌïòÏÑ∏Ïöî<br>
                    2. "StackEdit Ïó¥Í∏∞"Î•º ÌÅ¥Î¶≠ÌïòÏó¨ Ïã§Ï†ú StackEditÏóêÏÑú Ìé∏ÏßëÌïòÏÑ∏Ïöî<br>
                    3. Î≥ÄÍ≤ΩÏÇ¨Ìï≠Ïù¥ ÏûêÎèôÏúºÎ°ú ÏôºÏ™Ω textareaÏóê ÎèôÍ∏∞ÌôîÎê©ÎãàÎã§</p>
                </div>
            </div>
        </div>
    </div>

    <!-- StackEdit.js ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
    <script src="https://unpkg.com/stackedit-js@1.0.7/docs/lib/stackedit.min.js"></script>
    
    <script>
        class StackEditIntegration {
            constructor() {
                this.stackedit = null;
                this.currentFile = null;
                this.isStackEditOpen = false;
                
                this.textarea = document.getElementById('markdownTextarea');
                this.previewContent = document.getElementById('previewContent');
                this.loadingOverlay = document.getElementById('loadingOverlay');
                
                this.setupEventListeners();
                this.updateStatus('Ï§ÄÎπÑÎê®');
            }
            
            setupEventListeners() {
                // Î≤ÑÌäº Ïù¥Î≤§Ìä∏
                document.getElementById('openStackEditBtn').addEventListener('click', () => this.openStackEdit());
                document.getElementById('silentModeBtn').addEventListener('click', () => this.silentMode());
                document.getElementById('closeStackEditBtn').addEventListener('click', () => this.closeStackEdit());
                document.getElementById('exportHtmlBtn').addEventListener('click', () => this.exportHTML());
                
                // Îç∞Î™® ÌååÏùº Ïù¥Î≤§Ìä∏
                document.querySelectorAll('.demo-file').forEach(btn => {
                    btn.addEventListener('click', (e) => this.loadDemo(e.target.dataset.demo));
                });
                
                // Textarea Î≥ÄÍ≤Ω Ïù¥Î≤§Ìä∏
                this.textarea.addEventListener('input', () => {
                    if (!this.isStackEditOpen) {
                        this.renderPreview();
                    }
                });
                
                // Ï¥àÍ∏∞ Î†åÎçîÎßÅ
                this.renderPreview();
            }
            
            async openStackEdit() {
                try {
                    this.updateStatus('StackEdit Î°úÎî© Ï§ë...');
                    this.showLoading(true);
                    
                    // StackEdit Ïù∏Ïä§ÌÑ¥Ïä§ ÏÉùÏÑ±
                    this.stackedit = new Stackedit();
                    
                    // ÌååÏùº Ïó¥Í∏∞
                    const fileName = `document_${Date.now()}.md`;
                    this.currentFile = {
                        name: fileName,
                        content: {
                            text: this.textarea.value
                        },
                        properties: {
                            extensions: {
                                katex: { enabled: true },
                                mermaid: { enabled: true },
                                emoji: { enabled: true }
                            }
                        }
                    };
                    
                    this.stackedit.openFile(this.currentFile);
                    this.isStackEditOpen = true;
                    
                    // Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà ÏÑ§Ï†ï
                    this.stackedit.on('fileChange', (file) => {
                        console.log('File changed:', file);
                        this.textarea.value = file.content.text;
                        this.currentFile = file;
                        this.renderPreviewFromHTML(file.content.html);
                        this.updateStatus(`Ìé∏Ïßë Ï§ë: ${file.name}`);
                    });
                    
                    this.stackedit.on('close', () => {
                        console.log('StackEdit closed');
                        this.isStackEditOpen = false;
                        this.updateStatus('StackEdit Îã´Ìûò');
                        this.showLoading(false);
                    });
                    
                    this.updateStatus(`StackEdit Ïó¥Î¶º: ${fileName}`);
                    setTimeout(() => this.showLoading(false), 2000);
                    
                } catch (error) {
                    console.error('StackEdit Ïó¥Í∏∞ Ïã§Ìå®:', error);
                    this.updateStatus('Ïò§Î•ò: StackEdit Ïó¥Í∏∞ Ïã§Ìå®');
                    this.showLoading(false);
                    alert('StackEditÏùÑ Ïó¥ Ïàò ÏóÜÏäµÎãàÎã§. Ïù∏ÌÑ∞ÎÑ∑ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.');
                }
            }
            
            async silentMode() {
                try {
                    this.updateStatus('Silent Î™®Îìú Ïã§Ìñâ Ï§ë...');
                    
                    const stackedit = new Stackedit();
                    const fileName = `silent_${Date.now()}.md`;
                    
                    stackedit.openFile({
                        name: fileName,
                        content: {
                            text: this.textarea.value
                        },
                        properties: {
                            extensions: {
                                katex: { enabled: true },
                                mermaid: { enabled: true },
                                emoji: { enabled: true }
                            }
                        }
                    }, true); // silent mode
                    
                    stackedit.on('fileChange', (file) => {
                        console.log('Silent mode HTML:', file.content.html);
                        this.renderPreviewFromHTML(file.content.html);
                        this.updateStatus('Silent Î™®Îìú ÏôÑÎ£å');
                        
                        // ÏûêÎèôÏúºÎ°ú Îã´Í∏∞
                        setTimeout(() => stackedit.close(), 1000);
                    });
                    
                } catch (error) {
                    console.error('Silent Î™®Îìú Ïã§Ìå®:', error);
                    this.updateStatus('Ïò§Î•ò: Silent Î™®Îìú Ïã§Ìå®');
                }
            }
            
            closeStackEdit() {
                if (this.stackedit && this.isStackEditOpen) {
                    this.stackedit.close();
                    this.isStackEditOpen = false;
                    this.updateStatus('StackEdit Îã´Ìûò');
                } else {
                    this.updateStatus('StackEditÏù¥ Ïó¥Î†§ÏûàÏßÄ ÏïäÏùå');
                }
            }
            
            exportHTML() {
                if (this.currentFile && this.currentFile.content.html) {
                    const html = `<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${this.currentFile.name}</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.8/dist/katex.min.css">
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; }
        .katex-display { margin: 1em 0; }
        table { border-collapse: collapse; width: 100%; margin: 1em 0; }
        th, td { border: 1px solid #ddd; padding: 8px 12px; }
        th { background-color: #f5f5f5; font-weight: 600; }
        code { background: #f5f5f5; padding: 2px 4px; border-radius: 3px; }
        pre { background: #f5f5f5; padding: 1em; border-radius: 5px; overflow-x: auto; }
        blockquote { border-left: 4px solid #ddd; margin: 1em 0; padding: 0 1em; color: #666; }
    </style>
</head>
<body>
${this.currentFile.content.html}
</body>
</html>`;
                    
                    const blob = new Blob([html], { type: 'text/html' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = this.currentFile.name.replace('.md', '.html');
                    a.click();
                    URL.revokeObjectURL(url);
                    
                    this.updateStatus('HTML ÎÇ¥Î≥¥ÎÇ¥Í∏∞ ÏôÑÎ£å');
                } else {
                    alert('Î®ºÏ†Ä StackEditÏóêÏÑú Î¨∏ÏÑúÎ•º Ìé∏ÏßëÌï¥Ï£ºÏÑ∏Ïöî.');
                }
            }
            
            loadDemo(demoType) {
                const demos = {
                    math: `# üßÆ ÏàòÌïô Í≥µÏãù Îç∞Î™®

## Í∏∞Î≥∏ ÏàòÏãù
Ïù∏ÎùºÏù∏ ÏàòÏãù: $E = mc^2$, $\\alpha + \\beta = \\gamma$

## Î≥µÏû°Ìïú ÏàòÏãù
Îß•Ïä§Ïõ∞ Î∞©Ï†ïÏãù:
$$\\nabla \\times \\vec{\\mathbf{B}} -\\, \\frac1c\\, \\frac{\\partial\\vec{\\mathbf{E}}}{\\partial t} = \\frac{4\\pi}{c}\\vec{\\mathbf{j}}$$

$$\\nabla \\cdot \\vec{\\mathbf{E}} = 4 \\pi \\rho$$

## ÌñâÎ†¨
$$\\begin{pmatrix}
\\cos\\theta & -\\sin\\theta \\\\
\\sin\\theta & \\cos\\theta
\\end{pmatrix}
\\begin{pmatrix}
x \\\\ y
\\end{pmatrix}
=
\\begin{pmatrix}
x\\cos\\theta - y\\sin\\theta \\\\
x\\sin\\theta + y\\cos\\theta
\\end{pmatrix}$$`,

                    diagram: `# üìä Îã§Ïù¥Ïñ¥Í∑∏Îû® Îç∞Î™®

## ÌîåÎ°úÏö∞Ï∞®Ìä∏
\`\`\`mermaid
graph TD
    A[ÏãúÏûë] --> B{Ï°∞Í±¥ ÌôïÏù∏}
    B -->|Ïòà| C[Ï≤òÎ¶¨ A]
    B -->|ÏïÑÎãàÏò§| D[Ï≤òÎ¶¨ B]
    C --> E[Í≤∞Í≥º]
    D --> E
    E --> F[Ï¢ÖÎ£å]
\`\`\`

## ÏãúÌÄÄÏä§ Îã§Ïù¥Ïñ¥Í∑∏Îû®
\`\`\`mermaid
sequenceDiagram
    participant A as ÏÇ¨Ïö©Ïûê
    participant B as ÏõπÏÑúÎ≤Ñ
    participant C as Îç∞Ïù¥ÌÑ∞Î≤†Ïù¥Ïä§
    
    A->>B: Î°úÍ∑∏Ïù∏ ÏöîÏ≤≠
    B->>C: ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Ï°∞Ìöå
    C-->>B: ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞
    B-->>A: Î°úÍ∑∏Ïù∏ ÏÑ±Í≥µ
\`\`\`

## Í∞ÑÌä∏ Ï∞®Ìä∏
\`\`\`mermaid
gantt
    title ÌîÑÎ°úÏ†ùÌä∏ ÏùºÏ†ï
    dateFormat  YYYY-MM-DD
    section Í≥ÑÌöç
    ÏöîÍµ¨ÏÇ¨Ìï≠ Î∂ÑÏÑù    :a1, 2024-01-01, 30d
    ÏÑ§Í≥Ñ            :after a1, 20d
    section Í∞úÎ∞ú
    Í∞úÎ∞ú            :2024-02-20, 45d
    ÌÖåÏä§Ìä∏          :2024-04-05, 15d
\`\`\``,

                    table: `# üìã Í≥†Í∏â Ìëú Îç∞Î™®

## Í∏∞Î≥∏ Ìëú
| Í∏∞Îä• | StackEdit | Îã§Î•∏ ÏóêÎîîÌÑ∞ | ÎπÑÍ≥† |
|------|-----------|-------------|------|
| KaTeX | ‚úÖ | ‚ùå | ÏôÑÏ†Ñ ÏßÄÏõê |
| Mermaid | ‚úÖ | ‚ö†Ô∏è | Ï†úÌïúÏ†Å |
| Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî | ‚úÖ | ‚ùå | ÎèÖÎ≥¥Ï†Å |

## Ï†ïÎ†¨Îêú Ìëú
| ÏôºÏ™Ω Ï†ïÎ†¨ | Í∞ÄÏö¥Îç∞ Ï†ïÎ†¨ | Ïò§Î•∏Ï™Ω Ï†ïÎ†¨ |
|:----------|:----------:|----------:|
| ÎÇ¥Ïö© 1 | ÎÇ¥Ïö© 2 | ÎÇ¥Ïö© 3 |
| Í∏¥ ÎÇ¥Ïö©ÏûÖÎãàÎã§ | Ï§ëÍ∞Ñ | ÏßßÏùå |

## ÏàòÏãùÏù¥ Ìè¨Ìï®Îêú Ìëú
| Í≥µÏãù | ÏÑ§Î™Ö |
|------|------|
| $E = mc^2$ | ÏïÑÏù∏ÏäàÌÉÄÏù∏Ïùò ÏßàÎüâ-ÏóêÎÑàÏßÄ Îì±Í∞ÄÏÑ± |
| $\\pi r^2$ | ÏõêÏùò ÎÑìÏù¥ |
| $\\int_0^1 x dx = \\frac{1}{2}$ | Ï†ÅÎ∂Ñ ÏòàÏ†ú |`,

                    stackedit: `# Welcome to StackEdit!

Hi! I'm your first Markdown file in **StackEdit**. If you want to learn about StackEdit, you can read me. If you want to play with Markdown, you can edit me. Once you have finished with me, you can create new files by opening the **file explorer** on the left corner of the navigation bar.

## Files

StackEdit stores your files in your browser, which means all your files are automatically saved locally and are accessible **offline!**

### Create files and folders

The file explorer is accessible using the button in left corner of the navigation bar. You can create a new file by clicking the **New file** button in the file explorer. You can also create folders by clicking the **New folder** button.

## KaTeX

You can render LaTeX mathematical expressions using [KaTeX](https://khan.github.io/KaTeX/):

The *Gamma function* satisfying $\\Gamma(n) = (n-1)!\\quad\\forall n\\in\\mathbb N$ is via the Euler integral

$
\\Gamma(z) = \\int_0^\\infty t^{z-1}e^{-t}dt\\,.
$

## UML diagrams

You can render UML diagrams using [Mermaid](https://mermaidjs.github.io/). For example, this will produce a sequence diagram:

\`\`\`mermaid
sequenceDiagram
Alice ->> Bob: Hello Bob, how are you?
Bob-->>John: How about you John?
Bob--x Alice: I am good thanks!
Bob-x John: I am good thanks!
Note right of John: Bob thinks a long<br/>long time, so long<br/>that the text does<br/>not fit on a row.

Bob-->Alice: Checking with John...
Alice->John: Yes... John, how are you?
\`\`\`

And this will produce a flow chart:

\`\`\`mermaid
graph LR
A[Square Rect] -- Link text --> B((Circle))
A --> C(Round Rect)
B --> D{Rhombus}
C --> D
\`\`\``
                };
                
                this.textarea.value = demos[demoType] || demos.stackedit;
                this.renderPreview();
                this.updateStatus(`${demoType} Îç∞Î™® Î°úÎìúÎê®`);
                
                // ÌååÏùº Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
                document.getElementById('fileInfo').textContent = `demo_${demoType}.md`;
            }
            
            renderPreview() {
                // Í∞ÑÎã®Ìïú ÎßàÌÅ¨Îã§Ïö¥ Î†åÎçîÎßÅ (StackEdit ÏóÜÏù¥ÎèÑ Í∏∞Î≥∏ ÎØ∏Î¶¨Î≥¥Í∏∞ Ï†úÍ≥µ)
                const markdown = this.textarea.value;
                let html = this.simpleMarkdownToHtml(markdown);
                this.previewContent.innerHTML = html;
            }
            
            renderPreviewFromHTML(html) {
                // StackEditÏóêÏÑú ÏÉùÏÑ±Îêú HTMLÏùÑ Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö©
                this.previewContent.innerHTML = html;
            }
            
            simpleMarkdownToHtml(markdown) {
                // Í∏∞Î≥∏Ï†ÅÏù∏ ÎßàÌÅ¨Îã§Ïö¥ Î≥ÄÌôò (Ïã§Ï†úÎ°úÎäî StackEditÏùÑ ÏÇ¨Ïö©ÌïòÎäî Í≤ÉÏù¥ Ï¢ãÏùå)
                return markdown
                    .replace(/^### (.*$)/gim, '<h3>$1</h3>')
                    .replace(/^## (.*$)/gim, '<h2>$1</h2>')
                    .replace(/^# (.*$)/gim, '<h1>$1</h1>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/`([^`]*)`/g, '<code style="background: #f1f5f9; padding: 2px 4px; border-radius: 3px;">$1</code>')
                    .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" style="color: #667eea;">$1</a>')
                    .replace(/\n\s*\n/g, '</p><p>')
                    .replace(/\n/g, '<br>')
                    .replace(/^/, '<p>')
                    .replace(/$/, '</p>');
            }
            
            showLoading(show) {
                this.loadingOverlay.style.display = show ? 'flex' : 'none';
            }
            
            updateStatus(status) {
                document.getElementById('editorStatus').textContent = status;
                document.getElementById('stackeditStatus').textContent = status;
                console.log('Status:', status);
            }
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å ÌõÑ Ï¥àÍ∏∞Ìôî
        document.addEventListener('DOMContentLoaded', () => {
            // StackEdit.js Î°úÎìú ÌôïÏù∏
            if (typeof Stackedit !== 'undefined') {
                console.log('StackEdit.js Î°úÎìúÎê®');
                new StackEditIntegration();
            } else {
                console.error('StackEdit.js Î°úÎìú Ïã§Ìå®');
                document.getElementById('editorStatus').textContent = 'Ïò§Î•ò: StackEdit.js Î°úÎìú Ïã§Ìå®';
                
                // ÎåÄÏ≤¥ Î©îÏãúÏßÄ ÌëúÏãú
                document.getElementById('previewContent').innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #dc2626;">
                        <h3>‚ö†Ô∏è StackEdit.js Î°úÎìú Ïã§Ìå®</h3>
                        <p>StackEdit.js ÎùºÏù¥Î∏åÎü¨Î¶¨Î•º Î°úÎìúÌï† Ïàò ÏóÜÏäµÎãàÎã§.</p>
                        <p style="font-size: 14px; color: #64748b; margin-top: 20px;">
                            Ïù∏ÌÑ∞ÎÑ∑ Ïó∞Í≤∞ÏùÑ ÌôïÏù∏ÌïòÍ±∞ÎÇò ÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ®Ìï¥Ï£ºÏÑ∏Ïöî.
                        </p>
                    </div>
                `;
            }
        });
        
        // Ï†ÑÏó≠ ÏóêÎü¨ Ìï∏Îì§ÎßÅ
        window.addEventListener('error', (e) => {
            console.error('Ï†ÑÏó≠ ÏóêÎü¨:', e);
            if (e.message.includes('Stackedit')) {
                document.getElementById('editorStatus').textContent = 'Ïò§Î•ò: StackEdit Ïó∞Í≤∞ Ïã§Ìå®';
            }
        });
    </script>
</body>
</html>
